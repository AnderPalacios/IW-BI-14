{% extends "base_index_añadir.html" %}
{% load static %}

{% block encabezado %}
<title>Añadir Criatura - Bestiario de Harry Potter</title>
<meta charset="UTF-8">
<meta name="description" content="Formulario para añadir criaturas al bestiario de Harry Potter">
<link href="{% static 'css/styleFormulario.css' %}" rel="stylesheet"> 
{% endblock %}

{% block contenido %}
<section class="formulario">
    <h2><strong>Añadir una Criatura Mágica</strong></h2>
    <h4><strong>Completa el formulario para incluir una nueva criatura en el bestiario</strong></h4>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <section class="row">
            <fieldset class="personal_info">
                <legend>Información de la Criatura</legend>
                <div class="element">
                    <label for="id_nombre" required>Nombre: </label>
                    {{ form.nombre }}
                </div>
                <div class="element">
                    <label for="id_descripcion" required>Descripción: </label>
                    {{ form.descripcion }}
                </div>
                <div class="element">
                    <label for="id_tamano" required>Tamaño: </label>
                    {{ form.tamano }}
                </div>
                <div class="element">
                    <label for="id_raza" required>Raza: </label>
                    {{ form.raza }}
                </div>
                <div class="element">
                    <label for="id_categorias_peligro" required>Categorías de Peligro:</label>
                    <div class="categorias-peligro">
                        {% for checkbox in form.categorias_peligro %}
                            <div>
                                {{ checkbox.tag }} {{ checkbox.choice_label }}
                            </div>
                        {% endfor %}
                    </div>
                    {% if form.categorias_peligro.errors %}
                        <div class="error">
                            {{ form.categorias_peligro.errors }}
                        </div>
                    {% endif %}
                </div>
                <!-- Añadir un script para validar que al menos una categoría está seleccionada -->
                <script>
                    document.querySelector('form').addEventListener('submit', function(event) {
                        const checkboxes = document.querySelectorAll('input[name="categorias_peligro"]:checked');
                        if (checkboxes.length === 0) {
                            event.preventDefault();
                            alert("Debe seleccionar al menos una categoría de peligro.");
                        }
                    });
                </script>
            </fieldset>
        </section>
        <section class="final_row">
            <!-- <div class="element"> 
                <input type="submit" value="Añadir Criatura">
            </div>-->
            <button type="submit" class="btn btn-success mb-5">Enviar</button>
            <button type="button" class="btn btn-secondary mb-5" onclick=location.href="{% url 'index' %}">Volver</button>
            <!-- <a href="{%url 'index' %}" class="btn btn-secondary mb-5">Volver</a> -->
        </section>
    </form>                
</section>
</main>
{% endblock %}